function O(){throw new Error("setTimeout has not been defined")}function W(){throw new Error("clearTimeout has not been defined")}var h=O,g=W,E;typeof window!="undefined"?E=window:typeof self!="undefined"?E=self:E={};typeof E.setTimeout=="function"&&(h=setTimeout);typeof E.clearTimeout=="function"&&(g=clearTimeout);function V(t){if(h===setTimeout)return setTimeout(t,0);if((h===O||!h)&&setTimeout)return h=setTimeout,setTimeout(t,0);try{return h(t,0)}catch(e){try{return h.call(null,t,0)}catch(n){return h.call(this,t,0)}}}function fe(t){if(g===clearTimeout)return clearTimeout(t);if((g===W||!g)&&clearTimeout)return g=clearTimeout,clearTimeout(t);try{return g(t)}catch(e){try{return g.call(null,t)}catch(n){return g.call(this,t)}}}var m=[],b=!1,p,T=-1;function me(){!b||!p||(b=!1,p.length?m=p.concat(m):T=-1,m.length&&j())}function j(){if(!b){var t=V(me);b=!0;for(var e=m.length;e;){for(p=m,m=[];++T<e;)p&&p[T].run();T=-1,e=m.length}p=null,b=!1,fe(t)}}function he(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];m.push(new z(t,e)),m.length===1&&!b&&V(j)}function z(t,e){this.fun=t,this.array=e}z.prototype.run=function(){this.fun.apply(null,this.array)};var ge="browser",pe="browser",ve=!0,we=[],ye="",Ee={},be={},xe={};function v(){}var Ie=v,Ce=v,Te=v,Be=v,Re=v,Le=v,Se=v;function Pe(t){throw new Error("process.binding is not supported")}function ke(){return"/"}function $e(t){throw new Error("process.chdir is not supported")}function De(){return 0}var x=E.performance||{},_e=x.now||x.mozNow||x.msNow||x.oNow||x.webkitNow||function(){return new Date().getTime()};function qe(t){var e=_e.call(x)*.001,n=Math.floor(e),r=Math.floor(e%1*1e9);return t&&(n=n-t[0],r=r-t[1],r<0&&(n--,r+=1e9)),[n,r]}var Ae=new Date;function Fe(){var t=new Date,e=t-Ae;return e/1e3}var Me={nextTick:he,title:ge,browser:ve,env:{NODE_ENV:"production"},argv:we,version:ye,versions:Ee,on:Ie,addListener:Ce,once:Te,off:Be,removeListener:Re,removeAllListeners:Le,emit:Se,binding:Pe,cwd:ke,chdir:$e,umask:De,hrtime:qe,platform:pe,release:be,config:xe,uptime:Fe},Ue=function(t,e,n,r){function o(u){return u instanceof n?u:new n(function(i){i(u)})}return new(n||(n=Promise))(function(u,i){function s(c){try{l(r.next(c))}catch(d){i(d)}}function a(c){try{l(r.throw(c))}catch(d){i(d)}}function l(c){c.done?u(c.value):o(c.value).then(s,a)}l((r=r.apply(t,e||[])).next())})},G="application/font-woff",X="image/jpeg",He={woff:G,woff2:G,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:X,jpeg:X,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml"},Oe=function(){let e=0,n=()=>`0000${(Math.random()*Math.pow(36,4)<<0).toString(36)}`.slice(-4);return()=>(e+=1,`u${n()}${e}`)}();function We(t){let e=/\.([^./]*?)$/g.exec(t);return e?e[1]:""}function k(t){let e=We(t).toLowerCase();return He[e]||""}function Ve(t){return e=>new Promise(n=>{setTimeout(()=>{n(e)},t)})}function J(t){return t.search(/^(data:)/)!==-1}function $(t,e){return`data:${e};base64,${t}`}function Q(t){return t.split(/,/)[1]}function w(t){let e=[];for(let n=0,r=t.length;n<r;n+=1)e.push(t[n]);return e}function B(t,e){let n=window.getComputedStyle(t).getPropertyValue(e);return parseFloat(n.replace("px",""))}function je(t){let e=B(t,"border-left-width"),n=B(t,"border-right-width");return t.scrollWidth+e+n}function ze(t){let e=B(t,"border-top-width"),n=B(t,"border-bottom-width");return t.scrollHeight+e+n}function Ge(){let t,e;try{e=Me}catch(r){}let n=e&&e.env?e.env.devicePixelRatio:null;return n&&(t=parseInt(n,10),isNaN(t)&&(t=1)),t||window.devicePixelRatio||1}function K(t){return new Promise((e,n)=>{let r=new Image;r.onload=()=>e(r),r.onerror=n,r.crossOrigin="anonymous",r.src=t})}function Xe(t){return Ue(this,void 0,void 0,function*(){return Promise.resolve().then(()=>new XMLSerializer().serializeToString(t)).then(encodeURIComponent).then(e=>`data:image/svg+xml;charset=utf-8,${e}`)})}function Je(t,e){[":before",":after"].forEach(r=>D.clonePseudoElement(t,e,r))}var D;(function(t){function e(u,i,s){let a=window.getComputedStyle(u,s),l=a.getPropertyValue("content");if(l===""||l==="none")return;let c=Oe();try{i.className=`${i.className} ${c}`}catch(P){return}let d=document.createElement("style");d.appendChild(n(c,s,a)),i.appendChild(d)}t.clonePseudoElement=e;function n(u,i,s){let a=`.${u}:${i}`,l=s.cssText?r(s):o(s);return document.createTextNode(`${a}{${l}}`)}function r(u){let i=u.getPropertyValue("content");return`${u.cssText} content: ${i};`}function o(u){return w(u).map(i=>{let s=u.getPropertyValue(i),a=u.getPropertyPriority(i);return`${i}: ${s}${a?" !important":""};`}).join(" ")}})(D||(D={}));var R=function(t,e,n,r){function o(u){return u instanceof n?u:new n(function(i){i(u)})}return new(n||(n=Promise))(function(u,i){function s(c){try{l(r.next(c))}catch(d){i(d)}}function a(c){try{l(r.throw(c))}catch(d){i(d)}}function l(c){c.done?u(c.value):o(c.value).then(s,a)}l((r=r.apply(t,e||[])).next())})};function Qe(t){return R(this,void 0,void 0,function*(){if(t instanceof HTMLCanvasElement){let e=t.toDataURL();return e==="data:,"?Promise.resolve(t.cloneNode(!1)):K(e)}return Promise.resolve(t.cloneNode(!1))})}function Ke(t,e,n){return R(this,void 0,void 0,function*(){let r=w(t.childNodes);return r.length===0?Promise.resolve(e):r.reduce((o,u)=>o.then(()=>Y(u,n)).then(i=>{i&&e.appendChild(i)}),Promise.resolve()).then(()=>e)})}function Ne(t,e){return R(this,void 0,void 0,function*(){return e instanceof Element?Promise.resolve().then(()=>Ye(t,e)).then(()=>Je(t,e)).then(()=>Ze(t,e)).then(()=>e):e})}function Ye(t,e){let n=window.getComputedStyle(t),r=e.style;n.cssText?r.cssText=n.cssText:w(n).forEach(o=>{r.setProperty(o,n.getPropertyValue(o),n.getPropertyPriority(o))})}function Ze(t,e){t instanceof HTMLTextAreaElement&&(e.innerHTML=t.value),t instanceof HTMLInputElement&&e.setAttribute("value",t.value)}function Y(t,e,n){return R(this,void 0,void 0,function*(){return!n&&e&&!e(t)?Promise.resolve(null):Promise.resolve(t).then(Qe).then(r=>Ke(t,r,e)).then(r=>Ne(t,r))})}var Z=3e4,_={};function et(t){return/ttf|otf|eot|woff2?/i.test(t)}function N(t,e){let n=t.replace(/\?.*/,"");if(et(n)&&(n=n.replace(/.*\//,"")),_[n])return _[n];e.cacheBust&&(t+=(/\?/.test(t)?"&":"?")+new Date().getTime());let r=i=>{let s="";if(e.imagePlaceholder){let l=e.imagePlaceholder.split(/,/);l&&l[1]&&(s=l[1])}let a=`Failed to fetch resource: ${t}`;return i&&(a=typeof i=="string"?i:i.message),a&&console.error(a),s},u=(window.fetch?window.fetch(t).then(i=>new Promise((s,a)=>{i.blob().then(l=>{s({blob:l,contentType:i.headers.get("Content-Type")})})})).then(({blob:i,contentType:s})=>new Promise((a,l)=>{let c=new FileReader;c.onloadend=()=>a({contentType:s,blob:c.result}),c.onerror=l,c.readAsDataURL(i)})).then(({blob:i,contentType:s})=>({contentType:s,blob:Q(i)})).catch(()=>new Promise((i,s)=>s())):new Promise((i,s)=>{let a=new XMLHttpRequest,l=()=>{s(new Error(`Timeout of ${Z}ms occured while fetching resource: ${t}`))},c=()=>{if(a.readyState!==4)return;if(a.status!==200){s(new Error(`Failed to fetch resource: ${t}, status: ${a.status}`));return}let d=new FileReader;d.onloadend=()=>{i({blob:Q(d.result),contentType:a.getResponseHeader("Content-Type")||""})},d.readAsDataURL(a.response)};a.onreadystatechange=c,a.ontimeout=l,a.responseType="blob",a.timeout=Z,a.open("GET",t,!0),a.send()})).catch(r);return _[n]=u,u}var ee=/url\((['"]?)([^'"]+?)\1\)/g,tt=/url\([^)]+\)\s*format\((["'])([^"']+)\1\)/g,nt=/src:\s*(?:url\([^)]+\)\s*format\([^)]+\)[,;]\s*)+/g;function te(t){return t.search(ee)!==-1}function ne(t,e,n){if(!te(t))return Promise.resolve(t);let r=rt(t,n);return Promise.resolve(r).then(ot).then(o=>o.reduce((u,i)=>u.then(s=>it(s,i,e,n)),Promise.resolve(r)))}function rt(t,{preferredFontFormat:e}){return e?t.replace(nt,n=>{for(;;){let[r,,o]=tt.exec(n)||[];if(!o)return"";if(o===e)return`src: ${r};`}}):t}function ot(t){let e=[];return t.replace(ee,(n,r,o)=>(e.push(o),n)),e.filter(n=>!J(n))}function it(t,e,n,r,o){let u=n?ut(e,n):e;return Promise.resolve(u).then(i=>o?o(i):N(i,r)).then(i=>typeof i=="string"?$(i,k(e)):$(i.blob,k(e)||i.contentType)).then(i=>t.replace(at(e),`$1${i}$3`)).then(i=>i,()=>u)}function ut(t,e){if(t.match(/^[a-z]+:\/\//i))return t;if(t.match(/^\/\//))return window.location.protocol+t;if(t.match(/^[a-z]+:/i))return t;let n=document.implementation.createHTMLDocument(),r=n.createElement("base"),o=n.createElement("a");return n.head.appendChild(r),n.body.appendChild(o),e&&(r.href=e),o.href=t,o.href}function at(t){return new RegExp(`(url\\(['"]?)(${ct(t)})(['"]?\\))`,"g")}function ct(t){return t.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1")}var q=function(t,e,n,r){function o(u){return u instanceof n?u:new n(function(i){i(u)})}return new(n||(n=Promise))(function(u,i){function s(c){try{l(r.next(c))}catch(d){i(d)}}function a(c){try{l(r.throw(c))}catch(d){i(d)}}function l(c){c.done?u(c.value):o(c.value).then(s,a)}l((r=r.apply(t,e||[])).next())})};function re(t,e){return q(this,void 0,void 0,function*(){return t instanceof Element?Promise.resolve(t).then(n=>st(n,e)).then(n=>lt(n,e)).then(n=>dt(n,e)):Promise.resolve(t)})}function st(t,e){return q(this,void 0,void 0,function*(){let n=t.style.getPropertyValue("background");return n?Promise.resolve(n).then(r=>ne(r,null,e)).then(r=>(t.style.setProperty("background",r,t.style.getPropertyPriority("background")),t)):Promise.resolve(t)})}function lt(t,e){return!(t instanceof HTMLImageElement)||J(t.src)?Promise.resolve(t):Promise.resolve(t.src).then(n=>N(n,e)).then(n=>$(n.blob,k(t.src)||n.contentType)).then(n=>new Promise((r,o)=>{t.onload=r,t.onerror=o,t.src=n})).then(()=>t,()=>t)}function dt(t,e){return q(this,void 0,void 0,function*(){let r=w(t.childNodes).map(o=>re(o,e));return Promise.all(r).then(()=>t)})}var I=function(t,e,n,r){function o(u){return u instanceof n?u:new n(function(i){i(u)})}return new(n||(n=Promise))(function(u,i){function s(c){try{l(r.next(c))}catch(d){i(d)}}function a(c){try{l(r.throw(c))}catch(d){i(d)}}function l(c){c.done?u(c.value):o(c.value).then(s,a)}l((r=r.apply(t,e||[])).next())})},A={};function ht(t){return I(this,void 0,void 0,function*(){return new Promise((e,n)=>{t.ownerDocument||n(new Error("Provided element is not within a Document")),e(w(t.ownerDocument.styleSheets))}).then(e=>ft(e)).then(mt)})}function pt(t,e){return I(this,void 0,void 0,function*(){return(e.fontEmbedCss!=null?Promise.resolve(e.fontEmbedCss):gt(t,e)).then(n=>{let r=document.createElement("style"),o=document.createTextNode(n);return r.appendChild(o),t.firstChild?t.insertBefore(r,t.firstChild):t.appendChild(r),t})})}function gt(t,e){return I(this,void 0,void 0,function*(){return ht(t).then(n=>Promise.all(n.map(r=>{let o=r.parentStyleSheet?r.parentStyleSheet.href:null;return ne(r.cssText,o,e)}))).then(n=>n.join(`
`))})}function ft(t){return I(this,void 0,void 0,function*(){let e=[],n=[];return t.forEach(r=>{if("cssRules"in r)try{w(r.cssRules).forEach((o,u)=>{if(o.type===CSSRule.IMPORT_RULE){let i=u+1;n.push(ie(o.href,r).then(ue).then(s=>{oe(s).forEach(l=>{try{r.insertRule(l,l.startsWith("@import")?i=i+1:r.cssRules.length)}catch(c){console.log("Error inserting rule from remote css",{rule:l,error:c})}})}).catch(s=>{console.log("Error loading remote css",s.toString())}))}})}catch(o){let u=t.find(i=>i.href===null)||document.styleSheets[0];r.href!=null&&n.push(ie(r.href).then(ue).then(i=>{oe(i).forEach(a=>{u.insertRule(a,r.cssRules.length)})}).catch(i=>{console.log("Error loading remote stylesheet",i.toString())})),console.log("Error inlining remote css file",o.toString())}}),Promise.all(n).then(()=>(t.forEach(r=>{if("cssRules"in r)try{w(r.cssRules).forEach(o=>{e.push(o)})}catch(o){console.log(`Error while reading CSS rules from ${r.href}`,o.toString())}}),e))})}function mt(t){return t.filter(e=>e.type===CSSRule.FONT_FACE_RULE).filter(e=>te(e.style.getPropertyValue("src")))}function oe(t){if(t===void 0)return[];let e=t,n=[],r="((@.*?keyframes [\\s\\S]*?){([\\s\\S]*?}\\s*?)})",o="((\\s*?(?:\\/\\*[\\s\\S]*?\\*\\/)?\\s*?@media[\\s\\S]*?){([\\s\\S]*?)}\\s*?})|(([\\s\\S]*?){([\\s\\S]*?)})",u=/(\/\*[\s\S]*?\*\/)/gi,i=/@import[\s\S]*?url\([^)]*\)[\s\S]*?;/gi;e=e.replace(u,"");let s=new RegExp(r,"gi"),a;for(;a=s.exec(e),a!==null;)n.push(a[0]);e=e.replace(s,"");let l=new RegExp(o,"gi");for(;;){if(a=i.exec(e),a===null){if(a=l.exec(e),a===null)break;i.lastIndex=l.lastIndex}else l.lastIndex=i.lastIndex;n.push(a[0])}return n}function ie(t,e){if(A[t])return A[t];let n=fetch(t).then(r=>({url:t,cssText:r.text()}),r=>{console.log("ERROR FETCHING CSS: ",r.toString())});return A[t]=n,n}function ue(t){return I(this,void 0,void 0,function*(){return t.cssText.then(e=>{let n=e,r=/url\(["']?([^"')]+)["']?\)/g,u=(n.match(/url\([^)]+\)/g)||[]).map(i=>{let s=i.replace(r,"$1");if(!s.startsWith("https://")){let a=t.url;s=new URL(s,a).href}return new Promise((a,l)=>{fetch(s).then(c=>c.blob()).then(c=>{let d=new FileReader;d.addEventListener("load",P=>{n=n.replace(i,`url(${d.result})`),a([i,d.result])}),d.readAsDataURL(c)}).catch(l)})});return Promise.all(u).then(()=>n)})})}function vt(t,e,n){let r="http://www.w3.org/2000/svg",o=document.createElementNS(r,"svg"),u=document.createElementNS(r,"foreignObject");return o.setAttributeNS("","width",`${e}`),o.setAttributeNS("","height",`${n}`),u.setAttributeNS("","width","100%"),u.setAttributeNS("","height","100%"),u.setAttributeNS("","x","0"),u.setAttributeNS("","y","0"),u.setAttributeNS("","externalResourcesRequired","true"),o.appendChild(u),u.appendChild(t),Xe(o)}function wt(t,e){let{style:n}=t;e.backgroundColor&&(n.backgroundColor=e.backgroundColor),e.width&&(n.width=`${e.width}px`),e.height&&(n.height=`${e.height}px`);let r=e.style;return r!=null&&Object.keys(r).forEach(o=>{n[o]=r[o]}),t}var ae=function(t,e,n,r){function o(u){return u instanceof n?u:new n(function(i){i(u)})}return new(n||(n=Promise))(function(u,i){function s(c){try{l(r.next(c))}catch(d){i(d)}}function a(c){try{l(r.throw(c))}catch(d){i(d)}}function l(c){c.done?u(c.value):o(c.value).then(s,a)}l((r=r.apply(t,e||[])).next())})};function ce(t,e={}){let n=e.width||je(t),r=e.height||ze(t);return{width:n,height:r}}function yt(t,e={}){return ae(this,void 0,void 0,function*(){let{width:n,height:r}=ce(t,e);return Y(t,e.filter,!0).then(o=>pt(o,e)).then(o=>re(o,e)).then(o=>wt(o,e)).then(o=>vt(o,n,r))})}function se(t,e={}){return ae(this,void 0,void 0,function*(){return yt(t,e).then(K).then(Ve(100)).then(n=>{let r=document.createElement("canvas"),o=r.getContext("2d"),u=e.pixelRatio||Ge(),{width:i,height:s}=ce(t,e),a=e.canvasWidth||i,l=e.canvasHeight||s;return r.width=a*u,r.height=l*u,r.style.width=`${a}`,r.style.height=`${l}`,e.backgroundColor&&(o.fillStyle=e.backgroundColor,o.fillRect(0,0,r.width,r.height)),o.drawImage(n,0,0,r.width,r.height),r})})}var C=document.getElementById("button-column"),L=document.getElementById("input-column"),S=document.getElementById("output-column"),le=document.getElementById("button-holder-footer"),F=document.getElementById("input-footer"),de=document.getElementById("output-footer"),y=document.getElementById("popup-container"),f=0;window.triggerInputEvent=function(t){var e=document.getElementById("input-"+t);e.addEventListener("click",updateEquation),e.click(),e.removeEventListener("click",updateEquation)};window.updateEquation=function(t){var e=this.value;e=e.replace(/\<br\>/g,"<br/>"),e=e.replace(/\<br\/\>/g," "),e=e.replace(/\<div\>/g," "),e=e.replace(/\<div\/\>/g," "),e=e.replace(/\n/g," "),e=e.replace(/\r/g," ");var n=+this.id.replace("input-",""),r=document.getElementById("output-"+n);katex.render(e,r,{throwOnError:!1,displayMode:!0,output:"html",fleqn:!0,macros:{"\\diff":"\\,\\mathrm{d}"}}),alignRow(n)};window.alignRow=function(t){var e=document.getElementById("button-holder-"+t),n=document.getElementById("input-"+t),r=document.getElementById("output-"+t);e.style.height="initial",n.style.height="initial",r.style.height="initial";var o=t==="footer"||t==="header"||r.childElementCount==0?0:32,u=e.clientHeight-o,i=n.clientHeight-o,s=r.childElementCount==0?r.clientHeight:r.children[0].clientHeight,a=Math.max(u,Math.max(i,s));e.style.height=a+o+"px",n.style.height=a+o+"px",r.style.height=a+o/2+"px",t!=="footer"&&t!=="header"&&(n.style.width=F.clientWidth+"px")};window.addRow=function(t){f!=0&&(document.getElementById("output-"+f).style.borderBottom="2px transparent solid");var e=f+1,n=document.createElement("div"),r=document.createElement("textarea"),o=document.createElement("div"),u=document.createElement("img"),i=document.createElement("img");u.classList=["rem-btn"],u.classList.add("clickable-icon"),u.src="svg/remove.svg",u.id="remove-button-"+e,u.setAttribute("draggable",!1),i.classList=["clickable-icon"],i.src="svg/duplicate.svg",i.id="duplicate-button-"+e,i.setAttribute("draggable",!1),n.classList=["button-holder"],n.setAttribute("draggable",!0),n.appendChild(u),n.appendChild(i),n.id="button-holder-"+e,r.classList=["tex-input"],r.id="input-"+e,o.classList=["svg-output"],o.id="output-"+e,f=e,r.addEventListener("keyup",updateEquation),u.addEventListener("click",removeEquation),i.addEventListener("click",copyEquation),n.addEventListener("dragstart",moveEquation),n.addEventListener("dragend",releaseEquation),n.addEventListener("dragover",dragEquationOver),n.addEventListener("dragenter",dragEquationEnter),n.addEventListener("dragleave",dragEquationLeave),n.addEventListener("drop",dropEquation),C.removeChild(le),L.removeChild(F),S.removeChild(de),C.appendChild(n),L.appendChild(r),S.appendChild(o),C.appendChild(le),L.appendChild(F),S.appendChild(de),triggerInputEvent(e),r.focus(),document.getElementById("output-"+f).style.borderBottom="2px black solid"};window.removeEquation=function(t){var e=+this.id.replace("remove-button-",""),n=document.getElementById("output-"+e);if(n.innerHTML="",C.removeChild(document.getElementById("button-holder-"+e)),L.removeChild(document.getElementById("input-"+e)),S.removeChild(document.getElementById("output-"+e)),C.childElementCount==2)f=0,addRow();else{for(var r=e;r<f;r++){var o=r+1;document.getElementById("button-holder-"+o).id="button-holder-"+r,document.getElementById("remove-button-"+o).id="remove-button-"+r,document.getElementById("duplicate-button-"+o).id="duplicate-button-"+r,document.getElementById("input-"+o).id="input-"+r,document.getElementById("output-"+o).id="output-"+r}f-=1}document.getElementById("output-"+f).style.borderBottom="2px black solid"};window.removeAll=function(t){if(!confirm("Delete all rows?"))return!1;for(var e=document.getElementsByClassName("rem-btn"),n=e.length,r=n-1;r>-1;r--)e[r].click()};window.copyEquation=function(t){var e=+this.id.replace("duplicate-button-","");addRow();for(var n=f;n>e;n--){var r=n-1;document.getElementById("input-"+n).value=document.getElementById("input-"+r).value,triggerInputEvent(n)}document.getElementById("input-"+(+e+1)).focus()};window.moveEquation=function(t){t.dataTransfer.setData("scratchtex/row",t.target.id),t.dataTransfer.dropEffect="move";var e=+t.target.id.split("-")[2];document.getElementById("button-holder-"+e).classList.add("drag-from"),document.getElementById("input-"+e).classList.add("drag-from")};window.releaseEquation=function(t){for(var e=1;e<=f;e++)document.getElementById("button-holder-"+e).classList.remove("drag-from"),document.getElementById("input-"+e).classList.remove("drag-from"),document.getElementById("button-holder-"+e).classList.remove("drag-to"),document.getElementById("input-"+e).classList.remove("drag-to")};window.dragEquationOver=function(t){if(!t.dataTransfer.types.includes("scratchtex/row"))return!0;t.preventDefault()};window.dragEquationEnter=function(t){if(!t.dataTransfer.types.includes("scratchtex/row"))return!0;var e=+this.id.split("-")[2];document.getElementById("button-holder-"+e).classList.add("drag-to"),document.getElementById("input-"+e).classList.add("drag-to"),t.preventDefault()};window.dragEquationLeave=function(t){if(t.relatedTarget.parentNode===this||t.relatedTarget===this)return t.preventDefault(),!1;var e=+this.id.split("-")[2];document.getElementById("button-holder-"+e).classList.remove("drag-to"),document.getElementById("input-"+e).classList.remove("drag-to")};window.dropEquation=function(t){t.preventDefault();var e=+this.id.split("-")[2],n=+t.dataTransfer.getData("scratchtex/row").split("-")[2];if(n<e){for(var r=document.getElementById("input-"+n).value,o=n;o<e;o++){var u=o+1;document.getElementById("input-"+o).value=document.getElementById("input-"+u).value,triggerInputEvent(o)}document.getElementById("input-"+e).value=r,triggerInputEvent(e)}else{for(var r=document.getElementById("input-"+n).value,o=n;o>e;o--){var u=o-1;document.getElementById("input-"+o).value=document.getElementById("input-"+u).value,triggerInputEvent(o)}document.getElementById("input-"+e).value=r,triggerInputEvent(e)}};window.showSidebar=function(t){document.getElementById("settings-sidebar").style.display="block"};window.hideSidebar=function(t){document.getElementById("settings-sidebar").style.display="none"};window.takeScreenshot=function(t){var e=document.createElement("canvas"),n=e.getContext("2d");e.height=0,e.width=0;for(var r=[],o=1;o<=f;o++)r.push(se(document.getElementById("output-"+o),{backgroundColor:"#ffffff"}));Promise.all(r).then(u=>{for(var i=0;i<u.length;i++){var s=u[i],a=e.width,l=e.height,c;l>0&&a>0&&(c=n.getImageData(0,0,a,l)),e.height+=s.height,e.width=Math.max(s.width,e.width);var d=s.getContext("2d").getImageData(0,0,s.width,s.height);n.putImageData(d,0,l),l>0&&a>0&&n.putImageData(c,0,0)}var P=e.toDataURL(e),M=document.createElement("img");M.src=P,document.getElementById("popup-background").style.display="block",y.style.display="block",y.innerHTML="",y.appendChild(M);var U=Math.max(0,(window.innerWidth-e.width)/2)+"px",H=Math.max(0,(window.innerHeight-e.height)/2)+"px";y.style.left=U,y.style.right=U,y.style.top=H,y.style.bottom=H})};window.closePopup=function(t){document.getElementById("popup-background").style.display="none",document.getElementById("popup-container").style.display="none"};document.getElementById("removeAll").addEventListener("click",removeAll);document.getElementById("add-btn").addEventListener("click",addRow);document.getElementById("settings-btn").addEventListener("click",showSidebar);document.getElementById("close-settings-btn").addEventListener("click",hideSidebar);document.getElementById("screenshot-btn").addEventListener("click",takeScreenshot);document.getElementById("popup-background").addEventListener("click",closePopup);window.alignRow("header");window.alignRow("footer");
//# sourceMappingURL=//.//scratchTeX.js.map
